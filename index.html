<!DOCTYPE html>
<head>
<title>
a
</title>
<style>
#text{
background-color: red;
}
#canvas{
background-color: brown;
}
</style>
</head>
<body>
<p id="text">
a
</p>
<canvas width="1000" height="500" id="canvas">
</canvas>
<script>
alert("w");
var idk = 1;
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
var things = [];
function moveEach() {
  things.forEach(idklmao => move(idklmao));
}
function tick() {
 if(things.length < 500) {
   addcircle();
 }
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.fillStyle="gray";
 ctx.fillRect(490, 0, 20, 100);
 things.forEach(idklmao => update(idklmao));
 moveEach();
 requestAnimationFrame(tick);
}
function collision(a,b) {
 let dx = a[0] + a[3] - b[0] - b[3];
 let dy = a[1] + a[4] - b[1] - b[4];
 let d = Math.sqrt(dy * dy + dx * dx);
 if(d > 0 && d < a[2] * 4) {
   a[4] *= 0.98;
   a[3] *= 0.98;
   a[4] += dy / d * 2;
   a[3] += dx / d * 2;
   ctx.beginPath();
   ctx.strokeStyle="blue";
   ctx.lineWidth = String(a[2] * 20);
   ctx.moveTo(a[0], a[1]);
   ctx.lineTo(b[0], b[1]);
   ctx.stroke();
   ctx.closePath();
 }
  if(d > 0 && d < a[2]) {
   //a[4] *= d / a[2];
   //a[3] *= d / a[2];
   a[4] += (dy / d) * (d - a[2]);
   a[3] += (dx / d) * (d - a[2]);
 }
}
function update(object) {
 object[4] += 1;
 things.forEach(thing => collision(object,thing));
}
function move(object) {
 if(object[4] + object[1] > canvas.height - 20) {
  object[4] *= -0.5;
  object[1] = canvas.height - 20;
  object[3] *= 0.5;
 }
 if(object[3] + object[0] > canvas.width - 20) {
  object[3] *= -0.5;
  object[1] = canvas.height - 20;
  object[4] *= 0.5;
 }
 object[0] += object[3];
 object[1] += object[4];
 ctx.beginPath();
 ctx.arc(object[0], object[1], object[2] * 10, 0, Math.PI * 2);
 ctx.fillStyle="blue";
 ctx.fill();
 ctx.closePath();
}
function addcircle() {
things.push([500,100,2,Math.random() * 40 - 20,Math.random() * 40 - 20]);
}
tick();
</script>
</body>